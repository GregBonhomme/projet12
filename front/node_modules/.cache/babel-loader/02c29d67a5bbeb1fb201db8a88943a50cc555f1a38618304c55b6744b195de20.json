{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nfunction normalise(input) {\n  const id = input[0].data.id;\n  const keyData = input[0].data.keyData;\n  const infos = input[0].data.userInfos;\n  let score = 0;\n  input[0].data.todayScore ? score = input[0].data.todayScore : score = input[0].data.score;\n  const perfs = input[3].data;\n  const average = input[2].data.sessions;\n  const activity = input[1].data.sessions;\n  return {\n    id,\n    keyData,\n    infos,\n    score,\n    perfs,\n    average,\n    activity\n  };\n}\nasync function fetchData(userId) {\n  try {\n    const res = await Promise.all([fetch(\"http://localhost:3000/user/\" + userId), fetch(\"http://localhost:3000/user/\" + userId + \"/activity\"), fetch(\"http://localhost:3000/user/\" + userId + \"/average-sessions\"), fetch(\"http://localhost:3000/user/\" + userId + \"/performance\")]);\n    const data = await Promise.all(res.map(r => r.json()));\n    return data;\n  } catch {\n    throw Error(\"Promise failed\");\n  }\n}\nfunction useFetch(userId) {\n  _s();\n  const [userData, setUserData] = useState([]);\n  useEffect(() => {\n    userId && fetchData(userId).then(res => setUserData(res)).then(res => console.log(normalise(res)));\n  }, []);\n  return {\n    userData\n  };\n}\n_s(useFetch, \"a5RRa6NGDeZPfKLUsTyKB81I/p0=\");\nexport default useFetch;","map":{"version":3,"names":["useState","useEffect","normalise","input","id","data","keyData","infos","userInfos","score","todayScore","perfs","average","sessions","activity","fetchData","userId","res","Promise","all","fetch","map","r","json","Error","useFetch","_s","userData","setUserData","then","console","log"],"sources":["C:/Users/grego/Documents/temp/OpenClassroom/projet12/front/src/utils/service/useFetch/index.jsx"],"sourcesContent":["import { useState,useEffect } from \"react\";\r\n\r\nfunction normalise (input) {\r\n\r\n    const id = input[0].data.id\r\n    const keyData = input[0].data.keyData\r\n    const infos = input[0].data.userInfos\r\n    let score = 0\r\n    input[0].data.todayScore ? (score = input[0].data.todayScore) : (score = input[0].data.score)\r\n    const perfs = input[3].data\r\n    const average = input[2].data.sessions\r\n    const activity = input[1].data.sessions\r\n\r\n    return {id,keyData,infos,score,perfs,average,activity}\r\n}\r\n\r\nasync function fetchData (userId) {\r\n    try {\r\n        const res = await Promise.all([\r\n            fetch(\"http://localhost:3000/user/\"+ userId),\r\n            fetch(\"http://localhost:3000/user/\"+ userId +\"/activity\"),\r\n            fetch(\"http://localhost:3000/user/\"+ userId +\"/average-sessions\"),\r\n            fetch(\"http://localhost:3000/user/\"+ userId +\"/performance\")\r\n        ])\r\n        const data = await Promise.all(res.map(r => r.json()))\r\n        return data\r\n    } catch {\r\n        throw Error(\"Promise failed\")\r\n    }\r\n}\r\n\r\nfunction useFetch (userId) {\r\n    const [userData,setUserData] = useState([])\r\n\r\n    useEffect (() => {\r\n        userId && fetchData(userId)\r\n        .then(res => setUserData(res))\r\n        .then(res => console.log(normalise(res)))\r\n        },[])\r\n\r\n    return {userData}\r\n}\r\n\r\nexport default useFetch"],"mappings":";AAAA,SAASA,QAAQ,EAACC,SAAS,QAAQ,OAAO;AAE1C,SAASC,SAASA,CAAEC,KAAK,EAAE;EAEvB,MAAMC,EAAE,GAAGD,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACD,EAAE;EAC3B,MAAME,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACC,OAAO;EACrC,MAAMC,KAAK,GAAGJ,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACG,SAAS;EACrC,IAAIC,KAAK,GAAG,CAAC;EACbN,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACK,UAAU,GAAID,KAAK,GAAGN,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACK,UAAU,GAAKD,KAAK,GAAGN,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACI,KAAM;EAC7F,MAAME,KAAK,GAAGR,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI;EAC3B,MAAMO,OAAO,GAAGT,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACQ,QAAQ;EACtC,MAAMC,QAAQ,GAAGX,KAAK,CAAC,CAAC,CAAC,CAACE,IAAI,CAACQ,QAAQ;EAEvC,OAAO;IAACT,EAAE;IAACE,OAAO;IAACC,KAAK;IAACE,KAAK;IAACE,KAAK;IAACC,OAAO;IAACE;EAAQ,CAAC;AAC1D;AAEA,eAAeC,SAASA,CAAEC,MAAM,EAAE;EAC9B,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC1BC,KAAK,CAAC,6BAA6B,GAAEJ,MAAM,CAAC,EAC5CI,KAAK,CAAC,6BAA6B,GAAEJ,MAAM,GAAE,WAAW,CAAC,EACzDI,KAAK,CAAC,6BAA6B,GAAEJ,MAAM,GAAE,mBAAmB,CAAC,EACjEI,KAAK,CAAC,6BAA6B,GAAEJ,MAAM,GAAE,cAAc,CAAC,CAC/D,CAAC;IACF,MAAMX,IAAI,GAAG,MAAMa,OAAO,CAACC,GAAG,CAACF,GAAG,CAACI,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;IACtD,OAAOlB,IAAI;EACf,CAAC,CAAC,MAAM;IACJ,MAAMmB,KAAK,CAAC,gBAAgB,CAAC;EACjC;AACJ;AAEA,SAASC,QAAQA,CAAET,MAAM,EAAE;EAAAU,EAAA;EACvB,MAAM,CAACC,QAAQ,EAACC,WAAW,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EAE3CC,SAAS,CAAE,MAAM;IACbe,MAAM,IAAID,SAAS,CAACC,MAAM,CAAC,CAC1Ba,IAAI,CAACZ,GAAG,IAAIW,WAAW,CAACX,GAAG,CAAC,CAAC,CAC7BY,IAAI,CAACZ,GAAG,IAAIa,OAAO,CAACC,GAAG,CAAC7B,SAAS,CAACe,GAAG,CAAC,CAAC,CAAC;EACzC,CAAC,EAAC,EAAE,CAAC;EAET,OAAO;IAACU;EAAQ,CAAC;AACrB;AAACD,EAAA,CAVQD,QAAQ;AAYjB,eAAeA,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}